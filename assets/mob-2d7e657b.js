import{B as u,A as p}from"./box-a178775f.js";import{A as x,T as y,f as l,r as n}from"./index-61cc53d4.js";var o=[];for(let h=0;h<20;h++)o.push(`sprites/girl/Run (${h+1}).png`);const f=[];o.forEach(h=>f.push(y.from(h)));class v extends u{constructor(s){s.h=40,s.w=30,super(s),this.isCollided=s==null?void 0:s.isCollided,this.onCollide=s==null?void 0:s.onCollide,this.setup().then(()=>{this.isReady=1}),this.isReady=1}animate(s){if(!this.isReady)return;if(this.o.dev&&this.log(parseInt(this.ix),parseInt(this.iy)),this.leaved())return this.kill(this);let{x:t,y:i}=this;if(!(this.dx&&this.y)){let{x:e,y:r}=this.loc;const a=this.speed*s*.001;let d=Math.atan((i-r)/(e-t)).toFixed(2)||0;if(!d||(this.dx=(e-t>0?1:-1)*Math.abs(a*Math.cos(d)||0),this.dy=(r-i>0?1:-1)*Math.abs(a*Math.sin(d)||0),!(this.dx&&this.dy)))return}this.x+=this.dx,this.y+=this.dy,this.isCollided(this)&&this.onCollide(this)}static randPos(s,t,i,e){let r,a;return l()?(a=l()?i:e,r=n(s,t)):(r=l()?i:e,a=n(s,t)),{x:r,y:a}}async setup(){const s=[];for(let i=0;i<20;i++){let e=await x.load(`sprites/girl/Run (${i+1}).png`);s.push(e)}const t=new p(s);t.height=50,t.width=50,super.scale.x=this.x<this.loc.x?1:-1,t.play(),t.x=-30,t.y=-30,t.animationSpeed=.6,this.addChild(t),this.p=t}idle(){this.p.currentFrame=0,this.p.stop(),this.speed=0,this.dy=0,this.dx=0}leaved(){return this.x<-this.o.w*2||this.x>app.view.width+this.o.w*2||this.y<-this.o.h*2||this.y>app.view.height+this.o.h*2}resume(){this.p.play(),this.speed=this.o.speed}}export{v as default};
